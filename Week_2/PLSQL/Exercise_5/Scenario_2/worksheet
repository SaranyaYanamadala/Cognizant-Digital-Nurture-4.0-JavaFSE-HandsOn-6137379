-- Scenario 2
-- Creating Transactions Table
CREATE TABLE Transactions (
    transaction_id NUMBER PRIMARY KEY,
    account_id NUMBER,
    transaction_type VARCHAR2(20),
    amount NUMBER(10, 2),
    transaction_date DATE DEFAULT SYSDATE
);

-- Creating Audit Log Table
CREATE TABLE AuditLog (
    log_id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    transaction_id NUMBER,
    account_id NUMBER,
    transaction_type VARCHAR2(20),
    amount NUMBER(10, 2),
    logged_at DATE DEFAULT SYSDATE
);


-- Creating trigger
CREATE OR REPLACE TRIGGER LogTransaction
AFTER INSERT ON Transactions
FOR EACH ROW
BEGIN 
    INSERT INTO AuditLog(transaction_id, account_id, transaction_type, amount, logged_at)
    VALUES (:NEW.transaction_id, :NEW.account_id, :NEW.transaction_type, :NEW.amount, SYSDATE);
END;
/

-- Executing the trigger
INSERT INTO Transactions (transaction_id, account_id, transaction_type, amount)
VALUES (1, 101, 'Deposit', 5000);

-- Check the AuditLog
SELECT * FROM AuditLog;